import{e as x,r as l,f as u,c as r,a as o,d as n,t as c,o as a}from"#entry";const f={style:{"max-width":"720px",margin:"24px auto",padding:"16px",border:"1px solid #e5e7eb","border-radius":"10px",background:"#fff"}},k={key:0,style:{padding:"12px",background:"#f8fafc",border:"1px solid #e5e7eb","border-radius":"8px"}},m={key:1},g={style:{"white-space":"pre-wrap",background:"#f8fafc",border:"1px solid #e5e7eb","border-radius":"8px",padding:"12px"}},b={style:{"white-space":"pre-wrap",background:"#fefce8",border:"1px solid #fde68a","border-radius":"8px",padding:"12px"}},C=x({__name:"cookies-ssr",setup(y){const t=l(null),p=l({});return u(async()=>{const d=await fetch("/api/cookies-test-v6",{method:"GET"});try{t.value=await d.json()}catch{t.value=null}const e=Object.fromEntries(document.cookie.split("; ").filter(Boolean).map(s=>{const i=s.indexOf("=");return i===-1?[s,""]:[decodeURIComponent(s.slice(0,i)),decodeURIComponent(s.slice(i+1))]}));p.value={token:"(HttpOnly，不可在客户端JS读取)",theme:e.theme||"",lang:e.lang||""}}),(d,e)=>(a(),r("div",f,[e[3]||(e[3]=o("h1",{style:{margin:"0 0 12px","font-size":"22px"}},"SSR Cookies 示例",-1)),e[4]||(e[4]=o("p",{style:{margin:"0 0 16px",color:"#6b7280"}},[n("打开此页后将请求 "),o("code",null,"/api/cookies-test"),n("，服务器返回并写入三个 Cookie，然后在页面展示。")],-1)),t.value?(a(),r("div",m,[e[0]||(e[0]=o("h2",{style:{"font-size":"18px",margin:"16px 0 8px"}},"接口返回的 Cookies（响应体）",-1)),o("pre",g,""+c(JSON.stringify(t.value.cookies,null,2))+`
      `,1),e[1]||(e[1]=o("h2",{style:{"font-size":"18px",margin:"16px 0 8px"}},"浏览器端可读取的 Cookies",-1)),o("pre",b,""+c(JSON.stringify(p.value,null,2))+`
      `,1),e[2]||(e[2]=o("p",{style:{color:"#6b7280","margin-top":"8px"}},[n("说明："),o("code",null,"token"),n(" 为 HttpOnly，出于安全无法在客户端JS读取，但会随后续请求自动携带。")],-1))])):(a(),r("div",k," 正在请求接口并设置 Cookie ... "))]))}});export{C as default};
