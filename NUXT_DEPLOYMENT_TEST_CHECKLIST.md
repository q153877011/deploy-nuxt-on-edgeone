# Nuxt 部署平台功能测试清单

## 测试说明
本清单用于测试 Nuxt 4.1.3 项目在部署平台（EdgeOne）上的各项功能是否完备运行。

**测试环境要求：**
- 测试前确保项目已成功部署到生产环境
- 使用不同浏览器（Chrome、Firefox、Safari）进行测试
- 测试移动端和桌面端响应式表现
- 记录每个测试项的通过状态（✅ 通过 / ❌ 失败 / ⚠️ 部分通过）

---

## 一、基础功能测试

### 1.1 页面路由测试

#### ✅ 首页 (/)
- [ ] 页面可以正常访问
- [ ] 页面内容正确加载
- [ ] API 数据（/api/server-test）正常显示
- [ ] 刷新按钮功能正常
- [ ] 图片资源（/avator.jpg）正常加载

#### ✅ 关于页面 (/about)
- [ ] 页面可以正常访问（预渲染页面）
- [ ] 页面内容正确显示
- [ ] 在构建时已正确预渲染

#### ✅ 动态路由 (/posts/[id])
- [ ] 访问 /posts/1 正常显示
- [ ] 访问 /posts/2 正常显示
- [ ] 动态参数正确传递
- [ ] 不存在的 ID 返回 404

---

## 二、渲染模式测试

### 2.1 SSR（服务端渲染）测试

#### ✅ SSR 页面 (/test-ssr)
- [ ] 页面首次加载时在服务端渲染
- [ ] 查看页面源代码，HTML 中包含完整内容（不是空内容）
- [ ] 服务器时间和用户代理信息正确显示
- [ ] 客户端刷新按钮功能正常
- [ ] 无 hydration mismatch 错误（浏览器控制台）
- [ ] 页面标题和 meta 信息正确

**验证方法：**
- 右键查看页面源代码，确认 HTML 包含数据
- 检查浏览器控制台是否有错误

---

### 2.2 SSG（静态站点生成）测试

#### ✅ SSG 页面 (/test-ssg)
- [ ] 页面可以正常访问
- [ ] 页面在构建时已预渲染
- [ ] 查看页面源代码，HTML 包含完整内容
- [ ] 刷新页面内容保持不变（静态内容）
- [ ] 页面响应速度快（无需服务端处理）

**验证方法：**
- 检查构建产物，确认生成了静态 HTML
- 访问页面查看源码，确认内容已预渲染

---

### 2.3 ISR（增量静态再生）测试

#### ✅ ISR 页面 (/test-isr)
- [ ] 页面可以正常访问
- [ ] API 数据（/api/time）正常加载
- [ ] 当前时间、随机ID等数据正确显示
- [ ] 在 10 秒内刷新页面，随机ID保持不变
- [ ] 超过 10 秒后刷新，随机ID更新（SWR 重新验证）
- [ ] 无 hydration mismatch 错误
- [ ] 页面生成时间正确显示

**验证方法：**
- 记录初始访问时的随机ID
- 5 秒内刷新，ID 应该相同
- 15 秒后刷新，ID 应该不同

---

## 三、API 路由测试

### 3.1 基础 API 测试

#### ✅ /api/server-test
- [ ] API 可以正常访问
- [ ] 返回 JSON 格式数据：`{ hello: 'world' }`
- [ ] 响应头 Content-Type 为 application/json
- [ ] 响应时间正常（< 500ms）

#### ✅ /api/time
- [ ] API 可以正常访问
- [ ] 返回包含时间信息的 JSON 数据
- [ ] 时间格式正确（ISO 格式）
- [ ] 随机ID 每次请求都不同
- [ ] 本地时间格式正确（Asia/Shanghai 时区）

---

### 3.2 Cookies API 测试

#### ✅ /api/cookies-test
- [ ] API 可以正常访问
- [ ] 响应头包含 Set-Cookie
- [ ] Cookie 设置成功

#### ✅ /api/cookies-test-v2
- [ ] API 可以正常访问
- [ ] Cookie 设置正确
- [ ] Cookie 属性（HttpOnly、Secure、SameSite）正确

#### ✅ /api/cookies-test-v3
- [ ] API 可以正常访问
- [ ] 多个 Cookie 同时设置成功

#### ✅ /api/cookies-test-v4
- [ ] API 可以正常访问
- [ ] Cookie 路径设置正确

#### ✅ /api/cookies-test-v5
- [ ] API 可以正常访问
- [ ] Cookie 过期时间设置正确

#### ✅ /api/cookies-test-v6
- [ ] API 可以正常访问（Cookies SSR 页面使用）
- [ ] HttpOnly Cookie 设置成功
- [ ] 非 HttpOnly Cookie 可以在客户端读取

**验证方法：**
- 使用浏览器开发者工具检查 Network 标签
- 查看 Response Headers 中的 Set-Cookie
- 在 Application/Storage 标签查看 Cookies

---

### 3.3 流式传输 API 测试

#### ✅ /api/stream
- [ ] API 可以正常访问
- [ ] 返回流式数据（Server-Sent Events 格式）
- [ ] 响应头 Content-Type 为 `text/event-stream`
- [ ] 响应头 Connection 为 `keep-alive`
- [ ] 响应头 Cache-Control 为 `no-cache`
- [ ] 数据分多条逐步传输
- [ ] 查询参数正常传递（message、count、delay）
- [ ] 流式传输可以正常终止

**验证方法：**
- 在浏览器中访问 /stream 页面进行测试
- 查看 Network 标签，确认响应类型为 EventStream
- 观察数据是否逐步接收

---

## 四、高级功能测试

### 4.1 流式传输页面测试

#### ✅ /stream
- [ ] 页面可以正常访问
- [ ] 配置参数输入框正常显示
- [ ] "开始流式传输"按钮功能正常
- [ ] 数据实时接收并显示
- [ ] 进度条正确更新
- [ ] 统计信息正确显示（总计、成功、错误）
- [ ] "停止传输"按钮功能正常
- [ ] "清空数据"按钮功能正常
- [ ] 自动滚动到底部功能正常
- [ ] 页面无 JavaScript 错误

**验证方法：**
- 设置不同的参数（消息数、延迟时间）
- 观察数据接收和显示的实时性
- 测试停止和清空功能

---

### 4.2 Cookies SSR 页面测试

#### ✅ /cookies-ssr
- [ ] 页面可以正常访问
- [ ] 页面加载后自动请求 /api/cookies-test-v6
- [ ] 接口返回的 Cookies 正确显示
- [ ] 浏览器端可读取的 Cookies 正确显示
- [ ] HttpOnly Cookie 标记为不可读取
- [ ] Cookie 设置成功（在浏览器中可查看）
- [ ] 后续请求自动携带 Cookie

**验证方法：**
- 打开浏览器开发者工具
- 查看 Application/Storage 中的 Cookies
- 检查 Network 标签中的请求头，确认 Cookie 已携带

---

## 五、导航和布局测试

### 5.1 导航栏测试

#### ✅ AppHeader 组件
- [ ] 导航栏在所有页面正常显示
- [ ] Logo 可点击返回首页
- [ ] 所有导航链接正常显示：
  - 首页 (/)
  - 关于 (/about)
  - 流式传输 (/stream)
  - SSR测试 (/test-ssr)
  - SSG测试 (/test-ssg)
  - ISR测试 (/test-isr)
  - Cookies示例 (/cookies-ssr)
- [ ] 当前页面导航项高亮显示
- [ ] 导航链接点击后正常跳转
- [ ] 导航栏样式正确（渐变背景、图标等）
- [ ] 悬停效果正常

---

### 5.2 响应式设计测试

#### ✅ 桌面端（> 768px）
- [ ] 导航栏水平排列
- [ ] 所有导航项可见
- [ ] 布局正常，不拥挤

#### ✅ 平板端（768px - 1024px）
- [ ] 导航栏布局适应
- [ ] 内容区域宽度合适

#### ✅ 移动端（< 768px）
- [ ] 显示汉堡菜单按钮
- [ ] 点击汉堡菜单，导航菜单展开/收起
- [ ] 导航菜单全屏显示
- [ ] 点击导航项后菜单自动关闭
- [ ] 点击外部区域菜单关闭
- [ ] 按 ESC 键菜单关闭
- [ ] 菜单打开时禁止背景滚动
- [ ] 菜单动画流畅

**验证方法：**
- 使用浏览器开发者工具的设备模拟器
- 在不同屏幕尺寸下测试

---

## 六、错误处理测试

### 6.1 404 错误页面

#### ✅ 不存在的路由
- [ ] 访问不存在的路由（如 /not-found）显示 404 页面
- [ ] 404 页面样式正确
- [ ] 可以返回首页或上一页

### 6.2 500 错误页面

#### ✅ 服务器错误
- [ ] API 返回错误时，页面正确显示错误信息
- [ ] 错误页面样式正确
- [ ] 可以刷新重试

### 6.3 Hydration 错误

#### ✅ 水合检查
- [ ] 浏览器控制台无 hydration mismatch 警告
- [ ] SSR 页面水合成功
- [ ] 所有动态内容正确渲染

**验证方法：**
- 打开浏览器开发者工具 Console
- 检查是否有警告或错误信息

---

## 七、性能测试

### 7.1 页面加载性能

#### ✅ 首次内容绘制 (FCP)
- [ ] SSR 页面 FCP < 1.5 秒
- [ ] SSG 页面 FCP < 1 秒
- [ ] ISR 页面 FCP < 1.5 秒

#### ✅ 最大内容绘制 (LCP)
- [ ] 主要页面 LCP < 2.5 秒

#### ✅ 交互时间 (TTI)
- [ ] 主要页面 TTI < 3.5 秒

**验证方法：**
- 使用 Chrome DevTools 的 Lighthouse
- 使用 PageSpeed Insights
- 使用 Network 标签观察加载时间

---

### 7.2 API 响应性能

#### ✅ API 响应时间
- [ ] /api/server-test < 100ms
- [ ] /api/time < 200ms
- [ ] /api/stream 开始响应 < 500ms

---

### 7.3 构建产物大小

#### ✅ 打包体积
- [ ] 检查 .edgeone 目录大小合理
- [ ] JavaScript 文件经过压缩
- [ ] CSS 文件经过压缩
- [ ] 图片资源经过优化

---

## 八、部署平台特定测试

### 8.1 EdgeOne 平台测试

#### ✅ 部署验证
- [ ] 项目成功部署到 EdgeOne
- [ ] 部署命令执行成功
- [ ] 生产环境 URL 可以访问

#### ✅ 静态资源
- [ ] 静态资源（图片、字体等）正常加载
- [ ] 资源路径正确（.edgeone/assets）
- [ ] 资源 CDN 加速生效

#### ✅ 服务器处理
- [ ] SSR 请求正常处理
- [ ] API 路由正常处理
- [ ] Edge Functions 正常执行

#### ✅ 环境变量
- [ ] 环境变量正确配置
- [ ] 生产环境配置生效

---

### 8.2 跨浏览器兼容性

#### ✅ Chrome
- [ ] 所有功能正常
- [ ] 样式正确显示
- [ ] 无控制台错误

#### ✅ Firefox
- [ ] 所有功能正常
- [ ] 样式正确显示
- [ ] 无控制台错误

#### ✅ Safari
- [ ] 所有功能正常
- [ ] 样式正确显示
- [ ] 无控制台错误

#### ✅ Edge
- [ ] 所有功能正常
- [ ] 样式正确显示
- [ ] 无控制台错误

---

## 九、安全性测试

### 9.1 Cookie 安全

#### ✅ HttpOnly Cookie
- [ ] HttpOnly Cookie 无法通过 JavaScript 读取
- [ ] HttpOnly Cookie 在后续请求中自动携带
- [ ] 敏感信息使用 HttpOnly

#### ✅ Secure Cookie
- [ ] 在生产环境（HTTPS）中 Secure Cookie 生效
- [ ] HTTP 环境不会设置 Secure Cookie

#### ✅ SameSite 属性
- [ ] SameSite 属性设置正确
- [ ] 跨站请求 Cookie 策略符合要求

---

### 9.2 内容安全

#### ✅ XSS 防护
- [ ] 用户输入正确转义
- [ ] 动态内容安全渲染

#### ✅ CSRF 防护
- [ ] API 请求使用适当的 CSRF 防护（如需要）

---

## 十、功能完整性检查

### 10.1 页面列表验证

确认所有页面都已测试：
- [ ] 首页 (/)
- [ ] 关于 (/about)
- [ ] SSR测试 (/test-ssr)
- [ ] SSG测试 (/test-ssg)
- [ ] ISR测试 (/test-isr)
- [ ] 流式传输 (/stream)
- [ ] Cookies示例 (/cookies-ssr)
- [ ] 动态路由 (/posts/1, /posts/2)

---

### 10.2 API 列表验证

确认所有 API 都已测试：
- [ ] /api/server-test
- [ ] /api/time
- [ ] /api/stream
- [ ] /api/cookies-test
- [ ] /api/cookies-test-v2
- [ ] /api/cookies-test-v3
- [ ] /api/cookies-test-v4
- [ ] /api/cookies-test-v5
- [ ] /api/cookies-test-v6

---

## 十一、回归测试

### 11.1 核心功能回归

#### ✅ 路由功能
- [ ] 所有路由正常访问
- [ ] 动态路由参数正确
- [ ] 404 错误处理正确

#### ✅ 数据获取
- [ ] useFetch 正常工作
- [ ] useAsyncData 正常工作
- [ ] API 调用正常

#### ✅ 渲染模式
- [ ] SSR 正常
- [ ] SSG 正常
- [ ] ISR 正常（SWR 缓存）

---

## 测试记录模板

### 测试日期：___________
### 测试人员：___________
### 部署环境：___________
### 部署 URL：___________

### 测试结果汇总

- **总测试项：** ____ 项
- **通过：** ____ 项 ✅
- **失败：** ____ 项 ❌
- **部分通过：** ____ 项 ⚠️

### 发现的问题

| 问题编号 | 问题描述 | 严重程度 | 状态 | 备注 |
|---------|---------|---------|------|------|
| #1      |         | 高/中/低 |      |      |
| #2      |         | 高/中/低 |      |      |

### 测试结论

- [ ] 所有核心功能正常，可以上线
- [ ] 存在阻塞性问题，需要修复后再上线
- [ ] 存在非阻塞性问题，建议修复后再上线

---

## 测试工具推荐

1. **浏览器开发者工具**
   - Chrome DevTools
   - Firefox Developer Tools
   - Safari Web Inspector

2. **性能测试工具**
   - Lighthouse
   - PageSpeed Insights
   - WebPageTest

3. **API 测试工具**
   - Postman
   - curl
   - 浏览器 Network 面板

4. **响应式测试工具**
   - 浏览器设备模拟器
   - Responsive Design Mode

---

## 注意事项

1. 测试前确保项目已成功部署到生产环境
2. 清除浏览器缓存后再进行测试
3. 使用无痕/隐私模式避免缓存干扰
4. 记录所有发现的问题和异常行为
5. 在不同网络环境下测试（快速、慢速、离线）
6. 测试时关注浏览器控制台的错误和警告
7. 对于流式传输等实时功能，需要观察一段时间确认稳定性

---

**文档版本：** 1.0  
**最后更新：** 2024  
**维护者：** 开发团队
